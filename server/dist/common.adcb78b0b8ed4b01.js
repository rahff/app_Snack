"use strict";(self.webpackChunksnack=self.webpackChunksnack||[]).push([[592],{8915:(p,_,s)=>{s.d(_,{p:()=>P});var h=s(5529),m=s(4766),n=s(4850),o=s(9863),l=s(520),d=s(8736);let P=(()=>{class e{constructor(r,i){this.http=r,this.userService=i,this.api=m.N.API,this.orderList$=new h.xQ}createOrder(r){return new Promise((i,a)=>{console.log("inCreateOderServive"),this.http.post(this.api+"orders/new",r).subscribe(t=>{200===t.status?(this.userService.currentUser$.next({confirm:t.result.confirm,email:t.result.local.email,_id:t.result._id,adress:t.result.adress,commandes:t.result.commandes,firstname:t.result.firstname,name:t.result.name,role:t.result.role}),i(!0)):a("erreur lors de l'enregistrement de la commande")})})}getOrderList(){return this.http.get(this.api+"orders/list").pipe((0,n.U)(r=>r.result))}deleteOrder(r){return new Promise((i,a)=>{this.http.delete(this.api+"orders/delete/"+r).subscribe(t=>{200===t.status?(this.getOrderList(),i(t.message)):a(t.message)})})}emitOrder(){this.orderList$.next(this.orderList)}}return e.\u0275fac=function(r){return new(r||e)(o.LFG(l.eN),o.LFG(d.K))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9334:(p,_,s)=>{s.d(_,{M:()=>l});var h=s(4766),m=s(591),n=s(9863),o=s(520);let l=(()=>{class d{constructor(e){this.http=e,this.product$=new m.X([]),this.api=h.N.API,this.getProductList()}getProductList(){this.http.get(this.api+"products").subscribe(e=>{this.productList=e.result,this.emitProduct()})}emitProduct(){this.product$.next(this.productList)}addProduct(e,u){return new Promise((r,i)=>{let a=new FormData;a.append("product",JSON.stringify(e)),a.append("image",u),this.http.post(this.api+"products/add",a).subscribe(t=>{200===t.status?r(t.message):i(t.message)})})}getProductById(e){return this.http.get(this.api+"products/"+e)}updateProduct(e,u,r){return new Promise((i,a)=>{const t=new FormData;t.append("product",JSON.stringify(e)),r&&t.append("image",r),this.http.patch(this.api+"products/update/"+u,t).subscribe(c=>{200===c.status?i(c.message):a(c.message)})})}deleteProduct(e){return new Promise((u,r)=>{this.http.delete(this.api+"products/"+e).subscribe(i=>{200===i.status?u(i.message):r(i.message)})})}}return d.\u0275fac=function(e){return new(e||d)(n.LFG(o.eN))},d.\u0275prov=n.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);