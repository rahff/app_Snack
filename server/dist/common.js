(self.webpackChunksnack=self.webpackChunksnack||[]).push([[592],{7790:(t,e,s)=>{"use strict";s.d(e,{N:()=>o});var r=s(9923);class i{constructor(){this.nbrOfItem=0,this.total=0}}class a{constructor(){this.quantity=0,this.cost=0}}var c=s(7272);let o=(()=>{class t{constructor(){this.cart$=new r.X(null),this.cart=new i,this.cart.items=[],this.checkLocalStorage(),this.emitCart()}addToCart(t,e){const s=this.cart.items.find(e=>e.product.name===t.name);if(s)s.quantity+=e,s.cost+=t.price*e,this.cart.nbrOfItem+=e,this.cart.total+=t.price*e,this.emitCart();else{const s=new a;s.product=t,s.quantity=e,s.cost=t.price*e,this.cart.items.push(s),this.cart.nbrOfItem+=e,this.cart.total+=t.price*e,this.emitCart()}}removeItem(t){const e=this.cart.items.find(e=>e.product===t);if(e){const t=this.cart.items.indexOf(e);this.cart.items.splice(t,1),this.cart.nbrOfItem=this.cart.nbrOfItem-e.quantity,this.cart.total=this.cart.total-e.cost,this.emitCart()}}removeOne(t){const e=this.cart.items.find(e=>e.product===t);if(e){if(e.quantity>1)e.quantity--,e.cost-=e.cost,this.cart.nbrOfItem--,this.cart.total=this.cart.total-t.price;else{const t=this.cart.items.indexOf(e);this.cart.items.splice(t,1),this.cart.nbrOfItem--}this.emitCart()}}reinitCart(){this.cart.items=[],this.cart.nbrOfItem=0,this.cart.total=0,this.emitCart()}emitCart(){this.cart$.next(this.cart),this.saveCartOnStorage()}saveCartOnStorage(){localStorage.getItem("cart")?(localStorage.removeItem("cart"),localStorage.setItem("cart",JSON.stringify(this.cart))):localStorage.setItem("cart",JSON.stringify(this.cart))}checkLocalStorage(){const t=localStorage.getItem("cart");t&&(this.cart=JSON.parse(t))}refreshCommande(t){this.reinitCart();for(let e=0;e<t.length;e++){const s=new a;s.product={name:t[e].product,price:100*t[e].cost},s.quantity=t[e].quantity,this.cart.nbrOfItem+=t[e].quantity,s.cost?(s.cost+=100*t[e].cost,this.cart.total+=100*t[e].cost):(s.cost=100*t[e].cost,this.cart.total+=100*t[e].cost),this.cart.items.push(s)}this.saveCartOnStorage()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},8915:(t,e,s)=>{"use strict";s.d(e,{p:()=>o});var r=s(9582),i=s(4766),a=s(7272),c=s(1887);let o=(()=>{class t{constructor(t){this.http=t,this.api=i.N.API,this.orderList$=new r.xQ}createOrder(t){return new Promise((e,s)=>{console.log("inCreateOderServive"),this.http.post(this.api+"orders/new",t).subscribe(t=>{200===t.status?(this.getOrderList(),e(!0)):s("erreur lors de l'enregistrement de la commande")})})}getOrderList(){return new Promise((t,e)=>{this.http.get(this.api+"orders/list").subscribe(s=>{200===s.status?(this.orderList=s.result,this.emitOrder(),t(s)):e(s)})})}deleteOrder(t){return new Promise((e,s)=>{this.http.delete(this.api+"orders/delete/"+t).subscribe(t=>{200===t.status?(this.getOrderList(),e(t.message)):s(t.message)})})}emitOrder(){this.orderList$.next(this.orderList)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(c.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9334:(t,e,s)=>{"use strict";s.d(e,{M:()=>o});var r=s(4766),i=s(9923),a=s(7272),c=s(1887);let o=(()=>{class t{constructor(t){this.http=t,this.product$=new i.X([]),this.api=r.N.API,this.getProductList()}getProductList(){this.http.get(this.api+"products").subscribe(t=>{this.productList=t.result,this.emitProduct()})}emitProduct(){this.product$.next(this.productList)}addProduct(t,e){return new Promise((s,r)=>{let i=new FormData;i.append("product",JSON.stringify(t)),i.append("image",e),this.http.post(this.api+"products/add",i).subscribe(t=>{200===t.status?s(t.message):r(t.message)})})}getProductById(t){return this.http.get(this.api+"products/"+t)}updateProduct(t,e,s){return new Promise((r,i)=>{const a=new FormData;a.append("product",JSON.stringify(t)),s&&a.append("image",s),this.http.patch(this.api+"products/update/"+e,a).subscribe(t=>{200===t.status?r(t.message):i(t.message)})})}deleteProduct(t){return new Promise((e,s)=>{this.http.delete(this.api+"products/"+t).subscribe(t=>{200===t.status?e(t.message):s(t.message)})})}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(c.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);