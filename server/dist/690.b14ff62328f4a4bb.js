"use strict";(self.webpackChunksnack=self.webpackChunksnack||[]).push([[690],{6690:(k,_,u)=>{u.r(_),u.d(_,{CartePanierModule:()=>at});var C=u(9808),t=u(9863),x=u(5529);const b=["payPalButtonContainer"];let P=(()=>{class n{constructor(e){this.zone=e}registerScript(e,i,r){const c=window[i];if(c)return void this.zone.run(()=>{r(c)});const d=document.createElement("script");d.id=this.getElemId(i),d.innerHTML="",d.onload=()=>{this.zone.run(()=>{r(window[i])})},d.src=e,d.async=!0,d.defer=!0,document.getElementsByTagName("head")[0].appendChild(d)}cleanup(e){const i=document.getElementById(this.getElemId(e));i&&i.remove()}getElemId(e){return`ngx-paypal-script-elem-${e}`}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.R0b))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),g=(()=>{class n{constructor(e){this.scriptService=e,this.paypalWindowName="paypal"}registerPayPalScript(e,i){this.scriptService.registerScript(this.getUrlForConfig(e),this.paypalWindowName,i)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(e){const i=[{name:"client-id",value:e.clientId}];return e.currency&&i.push({name:"currency",value:e.currency}),e.commit&&i.push({name:"commit",value:e.commit}),e.vault&&i.push({name:"vault",value:e.vault}),e.extraParams&&i.push(...e.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(i)}`}getQueryString(e){let i="";for(let r=0;r<e.length;r++){const c=e[r];i+=0===r?"?":"&",i+=`${c.name}=${c.value}`}return i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(P))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),O=(()=>{class n{constructor(e,i,r){this.paypalScriptService=e,this.cdr=i,this.ngZone=r,this.registerScript=!0,this.scriptLoaded=new t.vpe,this.ngUnsubscribe=new x.xQ,this.initializePayPal=!0}set payPalButtonContainer(e){this.payPalButtonContainerElem=e}ngOnChanges(e){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const i=this.config;e.config.isFirstChange()&&i&&this.registerScript&&this.initPayPalScript(i,r=>{this.payPal=r,this.doPayPalCheck()}),e.config.isFirstChange()||this.reinitialize(i)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(e){this.payPal=e,this.doPayPalCheck()}reinitialize(e){if(this.config=e,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild);this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,i=>{this.payPal=i,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(e,i){this.paypalScriptService.registerPayPalScript({clientId:e.clientId,commit:e.advanced&&e.advanced.commit?e.advanced.commit:void 0,currency:e.currency,vault:e.vault,extraParams:e.advanced&&e.advanced.extraQueryParams?e.advanced.extraQueryParams:[]},r=>{this.scriptLoaded.next(r),i(r)})}generateElementId(){return`ngx-captcha-id-${(new Date).valueOf()}`}initPayPal(e,i){this.ngZone.runOutsideAngular(()=>{const h=Object.assign(Object.assign(Object.assign({style:e.style,onApprove:(l,m)=>this.ngZone.run(()=>{if(e.onApprove&&e.onApprove(l,m),e.authorizeOnServer)return e.authorizeOnServer(l,m);const A=e.onClientAuthorization;A&&m.order.capture().then(ct=>{this.ngZone.run(()=>{A(ct)})})}),onError:l=>{this.ngZone.run(()=>{e.onError&&e.onError(l)})},onCancel:(l,m)=>{this.ngZone.run(()=>{e.onCancel&&e.onCancel(l,m)})},onClick:(l,m)=>{this.ngZone.run(()=>{e.onClick&&e.onClick(l,m)})},onInit:(l,m)=>{this.ngZone.run(()=>{e.onInit&&e.onInit(l,m)})}},(e.createOrderOnClient||e.createOrderOnServer)&&{createOrder:(l,m)=>this.ngZone.run(()=>{if(e.createOrderOnClient&&e.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!e.createOrderOnClient&&!e.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(e.createOrderOnClient)return m.order.create(e.createOrderOnClient(l));if(e.createOrderOnServer)return e.createOrderOnServer(l);throw Error("Invalid state for 'createOrder'.")})}),e.createSubscription&&{createSubscription:(l,m)=>this.ngZone.run(()=>{if(e.createSubscription)return e.createSubscription(l,m)})}),e.onShippingChange&&{onShippingChange:(l,m)=>this.ngZone.run(()=>{if(e.onShippingChange)return e.onShippingChange(l,m)})});i.Buttons(h).render(`#${this.payPalButtonContainerId}`)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g),t.Y36(t.sBO),t.Y36(t.R0b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-paypal"]],viewQuery:function(e,i){if(1&e&&t.Gf(b,5),2&e){let r;t.iGM(r=t.CRH())&&(i.payPalButtonContainer=r.first)}},inputs:{registerScript:"registerScript",config:"config"},outputs:{scriptLoaded:"scriptLoaded"},features:[t.TTD],decls:2,vars:1,consts:[[3,"id"],["payPalButtonContainer",""]],template:function(e,i){1&e&&t._UZ(0,"div",0,1),2&e&&t.Q6J("id",i.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),n})(),s=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[P,g],imports:[[C.ez]]}),n})();var v=u(4030),w=u(2654),y=u(6219),N=u(9334);function L(n,o){if(1&n&&(t.TgZ(0,"li",13),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function z(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"div",9),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).openerModal()}),t._UZ(2,"i",10),t.qZA(),t.TgZ(3,"ul",11),t.YNc(4,L,2,1,"li",12),t.qZA(),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(4),t.Q6J("ngForOf",e.ingredients)}}function q(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"div",9),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).openerAddToCart()}),t._UZ(2,"i",10),t.qZA(),t.TgZ(3,"div",14),t.TgZ(4,"label"),t._uU(5,"Quantit\xe9"),t.qZA(),t.TgZ(6,"div",15),t.TgZ(7,"div",16),t._uU(8),t.qZA(),t.TgZ(9,"div",17),t.TgZ(10,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).increment()}),t._uU(11,"+"),t.qZA(),t.TgZ(12,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).decrement()}),t._uU(13,"-"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"button",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw().addToCart(r)}),t._UZ(15,"i",7),t._uU(16," Ajouter au Panier "),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(8),t.hij(" ",e.nbr," ")}}function U(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t._UZ(1,"img",3),t.TgZ(2,"div",4),t.TgZ(3,"h1"),t._uU(4),t.qZA(),t.TgZ(5,"h1"),t._uU(6),t.qZA(),t.YNc(7,z,5,1,"div",5),t.YNc(8,q,17,1,"div",5),t.TgZ(9,"button",6),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().openerModal(c.name)}),t._UZ(10,"i",7),t._uU(11," Liste des Ingr\xe9dients "),t.qZA(),t.TgZ(12,"button",6),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().openerAddToCart(c.name)}),t._UZ(13,"i",7),t._uU(14," Ajouter au Panier "),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("src",e.image,t.LSH),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.hij("",e.price/100," \u20ac"),t.xp6(1),t.Q6J("ngIf",i.openModal&&i.name===e.name),t.xp6(1),t.Q6J("ngIf",i.openAddToCart&&i.truc===e.name)}}let E=(()=>{class n{constructor(e){this.cartService=e,this.openModal=!1,this.openAddToCart=!1,this.nbr=1}ngOnChanges(){this.itemList=this.productList}ngOnInit(){console.log("init"),console.log(this.itemList)}openerModal(e){this.openModal=!this.openModal,this.name=e}openerAddToCart(e){this.openAddToCart=!this.openAddToCart,this.truc=e,this.nbr=1}addToCart(e){const i=this.nbr;this.openerAddToCart(),this.cartService.addToCart(e,i)}increment(){this.nbr++}decrement(){this.nbr>=1?this.nbr--:0===this.nbr&&this.openerAddToCart()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.N))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-carte"]],inputs:{productList:"productList"},features:[t.TTD],decls:2,vars:1,consts:[[1,"container-fluid","flex-col"],["class","card-product-item",4,"ngFor","ngForOf"],[1,"card-product-item"],["alt","tacos",1,"product",3,"src"],[1,"title-product"],["class","modal",4,"ngIf"],[1,"btn","btn-warning",3,"click"],[1,"bi","bi-star"],[1,"modal"],[1,"close-modal",3,"click"],[1,"bi","bi-x-square-fill"],[1,"ingredients-list"],["class","ingredient-item",4,"ngFor","ngForOf"],[1,"ingredient-item"],[1,"flex-col","flex-center"],[1,"container"],[1,"quantity"],[1,"flex-center","flex-col"],[1,"success","qty",3,"click"],[1,"btn","success",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,U,15,5,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.itemList))},directives:[C.sg,C.O5],styles:["@media screen and (max-width:550px){.container-fluid[_ngcontent-%COMP%]{background:url(mur1.2ed0f9983cecbc25.jpg);background-size:100% 100%;min-height:100vh}.card-product-item[_ngcontent-%COMP%]{padding:20px;margin:25px 15px 0;color:var(--warning);text-align:center;border:1px solid var(--warning);height:-moz-fit-content;height:fit-content;border-radius:20px}h1[_ngcontent-%COMP%]{margin:8px 0;-webkit-text-stroke:1px var(--danger)}img[_ngcontent-%COMP%]{width:250px;border-radius:15px;height:172px}.container[_ngcontent-%COMP%]{justify-content:center;font-size:20px;margin-top:15px;border:1px solid var(--warning);border-radius:50%;padding:15px 0}button.btn.btn-warning[_ngcontent-%COMP%]{margin-bottom:15px;width:130px}}@media screen and (min-width:551px){.container-fluid[_ngcontent-%COMP%]{background-image:url(mur1.2ed0f9983cecbc25.jpg);background-size:100% 100%;min-height:50vh;flex-direction:row!important;justify-content:center;flex-wrap:wrap}.card-product-item[_ngcontent-%COMP%]{padding:20px;margin:25px 15px 0;color:var(--warning);text-align:center;border:1px solid var(--warning);height:-moz-fit-content;height:fit-content;border-radius:20px;max-width:400px}h1[_ngcontent-%COMP%]{margin:8px 0;-webkit-text-stroke:1px var(--danger)}img[_ngcontent-%COMP%]{width:310px;border-radius:15px;height:222px}.container[_ngcontent-%COMP%]{justify-content:center;font-size:20px;margin-top:15px;border:1px solid var(--warning);border-radius:50%;padding:15px 0}button.btn.btn-warning[_ngcontent-%COMP%]{margin-bottom:15px;width:130px}}"]}),n})();function J(n,o){if(1&n&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.nbrOfItem," ")}}const D=function(){return["/page-menu/carte",1]},F=function(){return["/page-menu/carte",2]},j=function(){return["/page-menu/carte",3]},Y=function(){return["/page-menu/carte",4]},Q=function(){return["/page-menu/carte",5]},B=function(){return["/page-menu/carte",6]};let $=(()=>{class n{constructor(e,i,r){this.cartService=e,this.productService=i,this.activatedRoute=r,this.subscription=new w.w}ngOnInit(){console.log("init carte-menu"),this.activatedRoute.paramMap.subscribe(e=>{this.param=e.get("product")}),this.subscription.add(this.cartService.cart$.subscribe(e=>{e?this.nbrOfItem=e.nbrOfItem:this.cartService.emitCart()})),this.subscription.add(this.productService.product$.subscribe(e=>{e?(this.productList=e,this.itemList=this.productList.filter(i=>i.category===+this.param)):this.productService.getProductList()}))}changeProductList(e){console.log(this.param),this.itemList=this.productList.filter(i=>i.category===e),console.log(this.itemList)}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.N),t.Y36(N.M),t.Y36(v.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-carte-menu"]],decls:22,vars:14,consts:[[1,"container-fluid"],["routerLink","/page-menu/panier",1,"panier"],["routerLink","/page-menu/panier",1,"bi","bi-bag"],["class","icon-panier",4,"ngIf"],[1,"menu"],[1,"d-flex"],["routerLinkActive","active",1,"nav-carte-item",3,"routerLink","click"],[3,"productList"],[1,"icon-panier"]],template:function(e,i){1&e&&(t.TgZ(0,"header"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t._uU(3," Panier "),t.TgZ(4,"i",2),t.YNc(5,J,2,1,"div",3),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"ul",5),t.TgZ(8,"li",6),t.NdJ("click",function(){return i.changeProductList(1)}),t._uU(9,"Tacos"),t.qZA(),t.TgZ(10,"li",6),t.NdJ("click",function(){return i.changeProductList(2)}),t._uU(11,"Kebabs"),t.qZA(),t.TgZ(12,"li",6),t.NdJ("click",function(){return i.changeProductList(3)}),t._uU(13,"Burgers"),t.qZA(),t.qZA(),t.TgZ(14,"ul",5),t.TgZ(15,"li",6),t.NdJ("click",function(){return i.changeProductList(4)}),t._uU(16,"Boissons"),t.qZA(),t.TgZ(17,"li",6),t.NdJ("click",function(){return i.changeProductList(5)}),t._uU(18,"Dessert"),t.qZA(),t.TgZ(19,"li",6),t.NdJ("click",function(){return i.changeProductList(6)}),t._uU(20,"Plats"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(21,"app-carte",7)),2&e&&(t.xp6(5),t.Q6J("ngIf",i.nbrOfItem),t.xp6(3),t.Q6J("routerLink",t.DdM(8,D)),t.xp6(2),t.Q6J("routerLink",t.DdM(9,F)),t.xp6(2),t.Q6J("routerLink",t.DdM(10,j)),t.xp6(3),t.Q6J("routerLink",t.DdM(11,Y)),t.xp6(2),t.Q6J("routerLink",t.DdM(12,Q)),t.xp6(2),t.Q6J("routerLink",t.DdM(13,B)),t.xp6(2),t.Q6J("productList",i.itemList))},directives:[v.rH,C.O5,v.Od,E],styles:["@media screen and (max-width:550px){header[_ngcontent-%COMP%]{padding:0 15px;color:var(--danger);background:var(--warning)}.container-fluid[_ngcontent-%COMP%]{justify-content:flex-end}.menu[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;flex-direction:column;width:100%;height:100%}.panier[_ngcontent-%COMP%]{cursor:pointer}ul[_ngcontent-%COMP%]{padding:0 10px 20px;justify-content:center}li[_ngcontent-%COMP%]{font-size:25px;margin-right:25px;padding:10px;border-radius:30%;letter-spacing:2px}i[_ngcontent-%COMP%]{font-size:40px;position:relative}.active[_ngcontent-%COMP%]{background-color:var(--danger);color:var(--warning)}}@media screen and (min-width:551px){header[_ngcontent-%COMP%]{padding:0 15px;color:var(--danger);background:var(--warning)}.container-fluid[_ngcontent-%COMP%]{justify-content:flex-end;font-size:40px}.panier[_ngcontent-%COMP%]{cursor:pointer}.menu[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;flex-direction:column;width:100%;height:100%}ul[_ngcontent-%COMP%]{padding:0 10px 20px;justify-content:space-between;max-width:550px;margin:0 auto}li[_ngcontent-%COMP%]{font-size:35px;margin-right:25px;padding:10px;border-radius:30%;letter-spacing:2px;cursor:pointer}i[_ngcontent-%COMP%]{font-size:60px;position:relative;cursor:pointer}.active[_ngcontent-%COMP%]{background-color:var(--danger);color:var(--warning)}.icon-panier[_ngcontent-%COMP%]{font-size:32px}}"]}),n})();var I=u(8736),H=u(7307),S=u(4766),R=u(8915);let X=(()=>{class n{constructor(e,i,r,c){this.cartService=e,this.router=i,this.userService=r,this.orderService=c,this.idPaypal=S.N.PAYPAL_ID_CLIENT,this.currency=S.N.CURRENCY,this.loading=new t.vpe,this.detail=[]}ngOnInit(){this.userService.currentUser$.subscribe(e=>{this.userInfos=e}),this.initConfig()}initConfig(){const e=this.currency,r=this.totalCommande;this.paypalConfig={currency:e,clientId:this.idPaypal,createOrderOnClient:c=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:e,value:r,breakdown:{item_total:{currency_code:e,value:r}}},items:[{name:"Snack Tacos",quantity:"1",category:"PHYSICAL_GOODS",unit_amount:{currency_code:e,value:r}}]}]}),advanced:{commit:"true"},style:{label:"buynow",layout:"vertical",size:"responsive"},onApprove:(c,d)=>{this.loading.emit(!0);for(let h of this.cartService.cart.items)this.detail.push({product:h.product.name,quantity:h.quantity,cost:h.cost/100});console.log("onApprove - transaction was approved, but not authorized",c,d),d.order.get().then(h=>{console.log("onApprove - you can get full order details inside onApprove: ",h)})},onClientAuthorization:c=>{if(console.log("onClientAuthorization - you should probably inform your server about completed transaction at this point",c),"COMPLETED"===c.status){const h={detail:this.detail,user:this.userInfos,montant:+r,numero:c.id,date:new Date};this.orderService.createOrder(h).then(l=>{console.log("inthen createOrder"),this.cartService.reinitCart(),this.router.navigate(["/page-menu/commande-success"])}).catch(l=>{console.log("inCatchCreateOrder"),console.log(l),this.loading.emit(!1)})}},onCancel:(c,d)=>{console.log("OnCancel",c,d),this.loading.emit(!1)},onError:c=>{console.log("OnError",c),this.loading.emit(!1)},onClick:(c,d)=>{console.log("onClick",c,d)}}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.N),t.Y36(v.F0),t.Y36(I.K),t.Y36(R.p))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-paypal"]],inputs:{totalCommande:"totalCommande"},outputs:{loading:"loading"},decls:1,vars:1,consts:[[3,"config"]],template:function(e,i){1&e&&t._UZ(0,"ngx-paypal",0),2&e&&t.Q6J("config",i.paypalConfig)},directives:[O],styles:[".ng-star-inserted[_ngcontent-%COMP%]{width:100%!important}"]}),n})();function G(n,o){1&n&&(t.TgZ(0,"h1"),t._uU(1,"Votre Panier"),t.qZA())}function V(n,o){1&n&&(t.TgZ(0,"div",5),t.TgZ(1,"h1"),t._uU(2,"Votre Panier est vide !"),t.qZA(),t.TgZ(3,"button",6),t._uU(4,"Commander"),t.qZA(),t.qZA())}function K(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",15),t.TgZ(4,"button",16),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(3).deleteItem(c.product)}),t._UZ(5,"i",17),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(2),t.AsE(" ",e.quantity," ",e.product.name," ")}}function W(n,o){if(1&n&&(t.TgZ(0,"div",14),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.cost/100," \u20ac ")}}function tt(n,o){if(1&n&&(t.TgZ(0,"div",8),t.TgZ(1,"div",9),t.YNc(2,K,6,2,"div",10),t.TgZ(3,"div",11),t._uU(4,"TOTAL DE LA COMMANDE :"),t.qZA(),t.qZA(),t.TgZ(5,"div",12),t.YNc(6,W,2,1,"div",13),t.TgZ(7,"div",14),t._uU(8),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.cart.items),t.xp6(4),t.Q6J("ngForOf",e.cart.items),t.xp6(2),t.hij(" ",e.cart.total/100," \u20ac ")}}function et(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,tt,9,3,"div",7),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.cart.items.length)}}function nt(n,o){1&n&&(t.TgZ(0,"div",18),t._UZ(1,"mat-spinner",19),t.qZA())}function it(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-paypal",20),t.NdJ("loading",function(r){return t.CHM(e),t.oxw().onLoad(r)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("totalCommande",e.cart.total/100)}}const rt=[{path:"",redirectTo:"carte/1"},{path:"carte/:product",component:$},{path:"panier",component:(()=>{class n{constructor(e,i,r){this.cartService=e,this.userService=i,this.router=r,this.color="green",this.subcription=new w.w}ngOnInit(){this.subcription.add(this.userService.jwtToken$.subscribe(e=>{e.isAuth||this.router.navigate(["/login"])})),this.subcription.add(this.cartService.cart$.subscribe(e=>{this.cart=e}))}deleteItem(e){this.cartService.removeItem(e),console.log(this.cart),console.log(this.cartService.cart)}onLoad(e){this.isLoading=e}ngOnDestroy(){this.subcription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.N),t.Y36(I.K),t.Y36(v.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-panier"]],decls:6,vars:5,consts:[[4,"ngIf"],["class","vh-50 flex-center flex-col",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"button-paypal"],[3,"totalCommande","loading",4,"ngIf"],[1,"vh-50","flex-center","flex-col"],["routerLink","/page-menu",1,"btn","btn-warning"],["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"flex-col","w-80"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-item"],[1,"flex-col","w-20"],["class","price-item",4,"ngFor","ngForOf"],[1,"price-item"],[1,"actions"],[1,"suppr",3,"click"],[1,"bi","bi-trash"],[1,"spinner"],["diameter","250","color","primary",1,"load"],[3,"totalCommande","loading"]],template:function(e,i){1&e&&(t.YNc(0,G,2,0,"h1",0),t.YNc(1,V,5,0,"div",1),t.YNc(2,et,2,1,"div",0),t.YNc(3,nt,2,0,"div",2),t.TgZ(4,"div",3),t.YNc(5,it,1,1,"app-paypal",4),t.qZA()),2&e&&(t.Q6J("ngIf",i.cart.items.length&&i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.cart.items.length),t.xp6(1),t.Q6J("ngIf",!i.isLoading),t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Q6J("ngIf",i.cart.items.length))},directives:[C.O5,v.rH,C.sg,H.$g,X],styles:["@media screen and (max-width: 550px){h1[_ngcontent-%COMP%]{color:var(--success);text-align:center;margin:15px 0;font-size:45px}.container-fluid[_ngcontent-%COMP%]{min-height:30vh;color:var(--success);font-size:25px}.w-100[_ngcontent-%COMP%]{display:flex;justify-content:center}.w-80[_ngcontent-%COMP%]{width:79%;border:1px solid var(--success)}.w-20[_ngcontent-%COMP%]{width:19%;border:1px solid var(--success);display:flex}.price-item[_ngcontent-%COMP%]{border-bottom:1px solid var(--success);padding:10px;font-family:Arial,Helvetica,sans-serif;font-weight:700;font-size:15px;height:27px}.cart-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid var(--success);padding:10px;height:27px}.validation[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;background-color:var(--danger);border:none;border-radius:20px}button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:var(--warning)}.button-paypal[_ngcontent-%COMP%]{margin:0 auto;width:-moz-fit-content;width:fit-content;min-width:300px}.spinner[_ngcontent-%COMP%]{width:100%;height:30vh;display:flex;justify-content:center;align-items:center}}@media screen and (min-width: 551px){h1[_ngcontent-%COMP%]{color:var(--success);text-align:center;margin:25px 0;font-size:55px}.container-fluid[_ngcontent-%COMP%]{min-height:30vh;color:var(--success);font-size:25px;max-width:550px;margin:20px auto}.w-100[_ngcontent-%COMP%]{display:inline-block;justify-content:center}.w-80[_ngcontent-%COMP%]{width:79%;border:1px solid var(--success)}.w-20[_ngcontent-%COMP%]{width:19%;border:1px solid var(--success);display:flex}.price-item[_ngcontent-%COMP%]{border-bottom:1px solid var(--success);padding:10px;font-family:Arial,Helvetica,sans-serif;font-weight:700;font-size:15px;height:27px}.cart-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid var(--success);padding:10px;height:27px}.validation[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;background-color:var(--danger);border:none;border-radius:20px}button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:var(--warning)}.button-paypal[_ngcontent-%COMP%]{margin:0 auto;width:-moz-fit-content;width:fit-content;min-width:500px}.spinner[_ngcontent-%COMP%]{max-width:550px;height:40vh;display:flex;justify-content:center;align-items:center;margin:0 auto}.btn-warning[_ngcontent-%COMP%]{font-size:35px}}"]}),n})()},{path:"commande-success",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-success"]],decls:6,vars:0,consts:[[1,"flex-center"],[1,"bi","bi-emoji-smile"],["routerLink","/",1,"btn","btn-warning"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Votre commande est Valider !"),t.qZA(),t._UZ(3,"i",1),t.TgZ(4,"button",2),t._uU(5,"Retour au menu"),t.qZA(),t.qZA())},directives:[v.rH],styles:["@media screen and (max-width:550px){.flex-center[_ngcontent-%COMP%]{height:60vh;flex-direction:column}h1[_ngcontent-%COMP%]{color:var(--warning);text-align:center;margin:15px 0;font-size:45px}button[_ngcontent-%COMP%]{font-size:30px}i[_ngcontent-%COMP%]{font-size:50px;color:var(--warning);margin-bottom:15px}}@media screen and (min-width:551px){.flex-center[_ngcontent-%COMP%]{height:60vh;flex-direction:column;max-width:550px;margin:0 auto}h1[_ngcontent-%COMP%]{color:var(--warning);text-align:center;margin:15px 0;font-size:45px}button[_ngcontent-%COMP%]{font-size:40px}i[_ngcontent-%COMP%]{font-size:60px;color:var(--warning);margin-bottom:25px}}"]}),n})()}];var ot=u(5349);let at=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[s,v.Bz.forChild(rt),ot.m]]}),n})()},6219:(k,_,u)=>{u.d(_,{N:()=>P});var C=u(591);class t{constructor(){this.nbrOfItem=0,this.total=0}}class x{constructor(){this.quantity=0,this.cost=0}}var b=u(9863);let P=(()=>{class g{constructor(){this.cart$=new C.X(null),this.cart=new t,this.cart.items=[],this.checkLocalStorage(),this.emitCart()}addToCart(s,a){const p=this.cart.items.find(f=>f.product.name===s.name);if(p)p.quantity+=a,p.cost+=s.price*a,this.cart.nbrOfItem+=a,this.cart.total+=s.price*a,this.emitCart();else{const f=new x;f.product=s,f.quantity=a,f.cost=s.price*a,this.cart.items.push(f),this.cart.nbrOfItem+=a,this.cart.total+=s.price*a,this.emitCart()}}removeItem(s){const a=this.cart.items.find(p=>p.product===s);if(a){const p=this.cart.items.indexOf(a);this.cart.items.splice(p,1),this.cart.nbrOfItem=this.cart.nbrOfItem-a.quantity,this.cart.total=this.cart.total-a.cost,this.emitCart()}}removeOne(s){const a=this.cart.items.find(p=>p.product===s);if(a){if(a.quantity>1)a.quantity--,a.cost-=a.cost,this.cart.nbrOfItem--,this.cart.total=this.cart.total-s.price;else{const p=this.cart.items.indexOf(a);this.cart.items.splice(p,1),this.cart.nbrOfItem--}this.emitCart()}}reinitCart(){this.cart.items=[],this.cart.nbrOfItem=0,this.cart.total=0,this.emitCart()}emitCart(){this.cart$.next(this.cart),this.saveCartOnStorage()}saveCartOnStorage(){localStorage.getItem("cart")?(localStorage.removeItem("cart"),localStorage.setItem("cart",JSON.stringify(this.cart))):localStorage.setItem("cart",JSON.stringify(this.cart))}checkLocalStorage(){const s=localStorage.getItem("cart");s&&(this.cart=JSON.parse(s))}refreshCommande(s){this.reinitCart();for(let a=0;a<s.length;a++){const p=new x;p.product={name:s[a].product,price:100*s[a].cost},p.quantity=s[a].quantity,this.cart.nbrOfItem+=s[a].quantity,p.cost?(p.cost+=100*s[a].cost,this.cart.total+=100*s[a].cost):(p.cost=100*s[a].cost,this.cart.total+=100*s[a].cost),this.cart.items.push(p)}this.saveCartOnStorage()}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275prov=b.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);